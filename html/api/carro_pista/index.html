<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carro pista &mdash; SAPPC 0.1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Turn Algorithm" href="turn_algorithm.html" />
    <link rel="prev" title="Dashboard GUI" href="../moto_circulacion/dashboard.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> SAPPC
            <img src="../../_static/SAPPC_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome to SAPPC documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/data_acquisition.html">How to use the track’s data acquisition pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/process_data.html">How to process the data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/update_line_stops.html">Update lines for Line stop maneuvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/update_parking_areas.html">Update areas for parking spots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/update_cone_position.html">Update cone position for slaloms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../carro_circulacion/index.html">Carro Circulación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../moto_circulacion/index.html">Moto Circulación</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Carro pista</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-the-car-s-track-test">How to run the Car’s track test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-the-car-s-track-test-data-acquisition-pipeline">How to run the Car’s track test data acquisition pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#saving-data-to-a-file">Saving data to a file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualizing-data">Visualizing data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#description-of-the-car-s-track-test-algorithms">Description of the Car’s track test algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters-to-change">Parameters to change</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aruco-markers-parameters">Aruco markers parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parking-spots-or-line-stops-parameters">Parking spots or line stops parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#velocity-threshold">Velocity threshold</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#algorithms-used">Algorithms used</a><ul>
<li class="toctree-l4"><a class="reference internal" href="turn_algorithm.html">Turn Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="inline_parking_algorithm.html">Inline parking Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="ramp_algorithm.html">Ramp Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="reverse_parking_algorithm.html">Reverse Parking Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="stop_lines_algorithm.html">Stop Lines Algorithm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../moto_pista/index.html">Moto pista</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SAPPC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">API</a> &raquo;</li>
      <li>Carro pista</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api/carro_pista/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="carro-pista">
<h1>Carro pista<a class="headerlink" href="#carro-pista" title="Permalink to this heading"></a></h1>
<section id="how-to-run-the-car-s-track-test">
<h2>How to run the Car’s track test<a class="headerlink" href="#how-to-run-the-car-s-track-test" title="Permalink to this heading"></a></h2>
<p>To run the Car’s track test (Carro pista), the following steps must be followed:</p>
<ol class="arabic">
<li><p>Open the <em>/ansv_componente3/Pista/Vision/Car_algorithms/car_vision_algorithms.py</em> file and edit  <strong>line 29</strong>, changing the <em>test_path</em> variable to the folder of the test to be processed.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">28</span>    <span class="c1"># Open video</span>
<span class="hll"><span class="linenos">29</span>    <span class="n">test_path</span> <span class="o">=</span> <span class="s2">&quot;/home/josefajardo/Documents/Set_datos_ANSV/Carro_pista/Prueba_06_09_2022_10_24_36_HONDA&quot;</span>
</span><span class="linenos">30</span>    <span class="n">datetime_test</span> <span class="o">=</span> <span class="p">((</span><span class="n">test_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;Prueba_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="n">video_folder</span> <span class="o">=</span> <span class="n">test_path</span> <span class="o">+</span> <span class="s2">&quot;/videos&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Then run the command in a terminal:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/ansv_componente3/Pista/Vision/Car_algorithms/
python3 car_vision_algorithms.py
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="how-to-run-the-car-s-track-test-data-acquisition-pipeline">
<h2>How to run the Car’s track test data acquisition pipeline<a class="headerlink" href="#how-to-run-the-car-s-track-test-data-acquisition-pipeline" title="Permalink to this heading"></a></h2>
<p>The data acquisition pipeline can be used in two ways: to acquire data from the camera and save it to a file, or simply visualize it.</p>
<section id="saving-data-to-a-file">
<h3>Saving data to a file<a class="headerlink" href="#saving-data-to-a-file" title="Permalink to this heading"></a></h3>
<p>To save data to a file, the following steps must be followed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Pista/Vision/Data_acquisition/build
./save_camera_threads_car
</pre></div>
</div>
</section>
<section id="visualizing-data">
<h3>Visualizing data<a class="headerlink" href="#visualizing-data" title="Permalink to this heading"></a></h3>
<p>To visualize data, the following steps must be followed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Pista/Vision/Data_acquisition/build
./view_camera_threads
</pre></div>
</div>
</section>
</section>
<section id="description-of-the-car-s-track-test-algorithms">
<h2>Description of the Car’s track test algorithms<a class="headerlink" href="#description-of-the-car-s-track-test-algorithms" title="Permalink to this heading"></a></h2>
<p>The algorithms used in the Car’s track test are based on the detection of the <strong>Aruco markers</strong> located on the vehicle.  The main file of the process is located in <a href="#id1"><span class="problematic" id="id2">*</span></a>/ansv_componente3/Pista/Vision/Car_algorithms/car_vision_algorithms.py.</p>
<p>First in the <em>car_vision_algorithms.py</em> file the camera calibration matrix and distortion coefficients are loaded.  These values are obtained from the calibration process of the camera, which can be done following the instructions in the link: <a class="reference external" href="https://docs.opencv.org/4.x/dc/dbb/tutorial_py_calibration.html">https://docs.opencv.org/4.x/dc/dbb/tutorial_py_calibration.html</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">22</span>    <span class="c1"># Set camera matrix and distortion coefficients</span>
<span class="linenos">23</span>    <span class="n">camera_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">909.267507</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">940.086159</span><span class="p">],</span>
<span class="linenos">24</span>                              <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">909.619940</span><span class="p">,</span> <span class="mf">625.273047</span><span class="p">],</span>
<span class="linenos">25</span>                              <span class="p">[</span><span class="mf">0.000000</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">]])</span>
<span class="linenos">26</span>    <span class="n">dist_coeff</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.276573</span><span class="p">,</span> <span class="mf">0.049113</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.000638</span><span class="p">,</span> <span class="mf">0.001628</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">])</span>
</pre></div>
</div>
<p>Then, the test folder is selected and opened to know the date and time of the test.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">28</span>    <span class="c1"># Open video</span>
<span class="linenos">29</span>    <span class="n">test_path</span> <span class="o">=</span> <span class="s2">&quot;/home/josefajardo/Documents/Set_datos_ANSV/Carro_pista/Prueba_06_09_2022_10_24_36_HONDA&quot;</span>
<span class="linenos">30</span>    <span class="n">datetime_test</span> <span class="o">=</span> <span class="p">((</span><span class="n">test_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;Prueba_&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span>    <span class="n">video_folder</span> <span class="o">=</span> <span class="n">test_path</span> <span class="o">+</span> <span class="s2">&quot;/videos&quot;</span>
</pre></div>
</div>
<p>With the path of the test folder, all the videos used for the Car’s track test are loaded:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">34</span>    <span class="c1"># Folder for camera of post 6</span>
<span class="linenos">35</span>    <span class="n">video_path_post_6</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_6/&quot;</span>
<span class="linenos">36</span>    <span class="n">video_csv_path_6</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_6</span> <span class="o">+</span> <span class="s2">&quot;/Poste_6_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">37</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_6</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span>    <span class="c1"># Folder for camera of post 7</span>
<span class="linenos">40</span>    <span class="n">video_path_post_7</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_7/&quot;</span>
<span class="linenos">41</span>    <span class="n">video_csv_path_7</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_7</span> <span class="o">+</span> <span class="s2">&quot;/Poste_7_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">42</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_7</span><span class="p">)</span>
<span class="linenos">43</span>
<span class="linenos">44</span>    <span class="c1"># Folder for camera of post 8</span>
<span class="linenos">45</span>    <span class="n">video_path_post_8</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_8/&quot;</span>
<span class="linenos">46</span>    <span class="n">video_csv_path_8</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_8</span> <span class="o">+</span> <span class="s2">&quot;/Poste_8_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">47</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_8</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span>    <span class="c1"># Folder for camera of post 9</span>
<span class="linenos">50</span>    <span class="n">video_path_post_9</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_9/&quot;</span>
<span class="linenos">51</span>    <span class="n">video_csv_path_9</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_9</span> <span class="o">+</span> <span class="s2">&quot;/Poste_9_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">52</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_9</span><span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span>    <span class="c1"># Folder for camera of post 10</span>
<span class="linenos">55</span>    <span class="n">video_path_post_10</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_10/&quot;</span>
<span class="linenos">56</span>    <span class="n">video_csv_path_10</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_10</span> <span class="o">+</span> <span class="s2">&quot;/Poste_10_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">57</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_10</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span>    <span class="c1"># Folder for camera of post 11</span>
<span class="linenos">60</span>    <span class="n">video_path_post_11</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_11/&quot;</span>
<span class="linenos">61</span>    <span class="n">video_csv_path_11</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_11</span> <span class="o">+</span> <span class="s2">&quot;/Poste_11_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">62</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_11</span><span class="p">)</span>
<span class="linenos">63</span>
<span class="linenos">64</span>    <span class="c1"># Folder for camera of post 17</span>
<span class="linenos">65</span>    <span class="n">video_path_post_17</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_17/&quot;</span>
<span class="linenos">66</span>    <span class="n">video_csv_path_17</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_17</span> <span class="o">+</span> <span class="s2">&quot;/Poste_17_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">67</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_17</span><span class="p">)</span>
<span class="linenos">68</span>
<span class="linenos">69</span>    <span class="c1"># Folder for camera of post 18</span>
<span class="linenos">70</span>    <span class="n">video_path_post_18</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_18/&quot;</span>
<span class="linenos">71</span>    <span class="n">video_csv_path_18</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_18</span> <span class="o">+</span> <span class="s2">&quot;/Poste_18_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">72</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_18</span><span class="p">)</span>
<span class="linenos">73</span>
<span class="linenos">74</span>    <span class="c1"># Folder for camera of post 19</span>
<span class="linenos">75</span>    <span class="n">video_path_post_19</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_19/&quot;</span>
<span class="linenos">76</span>    <span class="n">video_csv_path_19</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_19</span> <span class="o">+</span> <span class="s2">&quot;/Poste_19_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">77</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_19</span><span class="p">)</span>
<span class="linenos">78</span>
<span class="linenos">79</span>    <span class="c1"># Folder for camera of post 20</span>
<span class="linenos">80</span>    <span class="n">video_path_post_20</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_20/&quot;</span>
<span class="linenos">81</span>    <span class="n">video_csv_path_20</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_20</span> <span class="o">+</span> <span class="s2">&quot;/Poste_20_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">82</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_20</span><span class="p">)</span>
<span class="linenos">83</span>
<span class="linenos">84</span>    <span class="c1"># Folder for camera of post 21</span>
<span class="linenos">85</span>    <span class="n">video_path_post_21</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_21/&quot;</span>
<span class="linenos">86</span>    <span class="n">video_csv_path_21</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_21</span> <span class="o">+</span> <span class="s2">&quot;/Poste_21_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">87</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_21</span><span class="p">)</span>
<span class="linenos">88</span>
<span class="linenos">89</span>    <span class="c1"># Folder for camera of post 22</span>
<span class="linenos">90</span>    <span class="n">video_path_post_22</span> <span class="o">=</span> <span class="n">video_folder</span> <span class="o">+</span> <span class="s2">&quot;/Poste_22/&quot;</span>
<span class="linenos">91</span>    <span class="n">video_csv_path_22</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">video_path_post_22</span> <span class="o">+</span> <span class="s2">&quot;/Poste_22_*.csv&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">92</span>    <span class="nb">print</span><span class="p">(</span><span class="n">video_csv_path_22</span><span class="p">)</span>
</pre></div>
</div>
<p>After the videos are loaded, a thread is created to process each of the files, according to the algorithm needed for that video, e.g., the video from post 6 to 9 need the stop line algorithm. All the threads will be executed simultaneously and will be creating a processed video file as well as a CSV file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 97</span>    <span class="c1"># Proccess videos</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span>    <span class="c1"># #- Stop line algorithm - Post 6</span>
<span class="linenos">100</span>    <span class="c1"># stop_line_proccesor_6 = StopLinesParkingChecker(video_csv_path_6, video_path_post_6, camera_matrix, dist_coeff, 0.05, post=6, view_image=True)</span>
<span class="linenos">101</span>    <span class="c1"># process_post6 = Process(target= stop_line_proccesor_6.process_video)</span>
<span class="linenos">102</span>    <span class="c1"># process_post6.start()</span>
<span class="linenos">103</span>
<span class="linenos">104</span>    <span class="c1"># # #- Stop line algorithm - Post 7</span>
<span class="linenos">105</span>    <span class="c1"># stop_line_proccesor_7 = StopLinesParkingChecker(video_csv_path_7, video_path_post_7, camera_matrix, dist_coeff, 0.05, post=7, view_image=False)</span>
<span class="linenos">106</span>    <span class="c1"># process_post7 = Process(target= stop_line_proccesor_7.process_video)</span>
<span class="linenos">107</span>    <span class="c1"># process_post7.start()</span>
<span class="linenos">108</span>
<span class="linenos">109</span>    <span class="c1"># # # - Stop line algorithm - Post 8</span>
<span class="linenos">110</span>    <span class="c1"># stop_line_proccesor_8 = StopLinesParkingChecker(video_csv_path_8, video_path_post_8, camera_matrix, dist_coeff, 0.05, post=8, view_image=False)</span>
<span class="linenos">111</span>    <span class="c1"># process_post8 = Process(target= stop_line_proccesor_8.process_video)</span>
<span class="linenos">112</span>    <span class="c1"># process_post8.start()</span>
<span class="linenos">113</span>
<span class="linenos">114</span>    <span class="c1"># # # - Stop line algorithm - Post 9</span>
<span class="linenos">115</span>    <span class="c1"># stop_line_proccesor_9 = StopLinesParkingChecker(video_csv_path_9, video_path_post_9, camera_matrix, dist_coeff, 0.05, post=9, view_image=False)</span>
<span class="linenos">116</span>    <span class="c1"># process_post9 = Process(target= stop_line_proccesor_9.process_video)</span>
<span class="linenos">117</span>    <span class="c1"># process_post9.start()</span>
<span class="linenos">118</span>
<span class="linenos">119</span>    <span class="c1"># # # - Ramp algorithm - Post 10</span>
<span class="linenos">120</span>    <span class="c1"># ramp_proccesor_10 = RampStopChecker(video_csv_path_10, video_path_post_10, camera_matrix, dist_coeff, 0.05)</span>
<span class="linenos">121</span>    <span class="c1"># process_post10 = Process(target= ramp_proccesor_10.process_video)</span>
<span class="linenos">122</span>    <span class="c1"># process_post10.start()</span>
<span class="linenos">123</span>
<span class="linenos">124</span>    <span class="c1"># # # - Turn algorithm - Post 17</span>
<span class="linenos">125</span>    <span class="c1"># turn_proccesor_17 = TurnChecker(video_csv_path_17, video_path_post_17, camera_matrix, dist_coeff, 0.05)</span>
<span class="linenos">126</span>    <span class="c1"># process_post17 = Process(target= turn_proccesor_17.process_video)</span>
<span class="linenos">127</span>    <span class="c1"># process_post17.start()</span>
<span class="linenos">128</span>
<span class="linenos">129</span>    <span class="c1"># # # - Turn algorithm - Post 22</span>
<span class="linenos">130</span>    <span class="c1"># turn_proccesor_22 = TurnChecker(video_csv_path_22, video_path_post_22, camera_matrix, dist_coeff, 0.05)</span>
<span class="linenos">131</span>    <span class="c1"># process_post22 = Process(target= turn_proccesor_22.process_video)</span>
<span class="linenos">132</span>    <span class="c1"># process_post22.start()</span>
<span class="linenos">133</span>
<span class="linenos">134</span>    <span class="c1"># #- Reverse parking algorithm - Post 18</span>
<span class="linenos">135</span>    <span class="n">reverse_parking_proccesor_18</span> <span class="o">=</span> <span class="n">ReverseParkingChecker</span><span class="p">(</span><span class="n">video_csv_path_18</span><span class="p">,</span> <span class="n">video_path_post_18</span><span class="p">,</span> <span class="n">camera_matrix</span><span class="p">,</span> <span class="n">dist_coeff</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">view_image</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">136</span>    <span class="n">process_post18</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span> <span class="n">reverse_parking_proccesor_18</span><span class="o">.</span><span class="n">process_video</span><span class="p">)</span>
<span class="linenos">137</span>    <span class="n">process_post18</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="linenos">138</span>
<span class="linenos">139</span>    <span class="c1"># # #- Inline parking algorithm - Post 19</span>
<span class="linenos">140</span>    <span class="c1"># inline_parking_proccesor_19 = InlineParkingChecker(video_csv_path_19, video_path_post_19, camera_matrix, dist_coeff, 0.05, post=19, view_image=False)</span>
<span class="linenos">141</span>    <span class="c1"># process_post19 = Process(target= inline_parking_proccesor_19.process_video)</span>
<span class="linenos">142</span>    <span class="c1"># process_post19.start()</span>
<span class="linenos">143</span>
<span class="linenos">144</span>    <span class="c1"># # #- Inline parking algorithm - Post 20</span>
<span class="linenos">145</span>    <span class="c1"># inline_parking_proccesor_20 = InlineParkingChecker(video_csv_path_20, video_path_post_20, camera_matrix, dist_coeff, 0.05, post=20, view_image=False)</span>
<span class="linenos">146</span>    <span class="c1"># process_post20 = Process(target= inline_parking_proccesor_20.process_video)</span>
<span class="linenos">147</span>    <span class="c1"># process_post20.start()</span>
</pre></div>
</div>
<p>Finally, the application will wait for all the threads to finish and then will stop.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">149</span>    <span class="c1"># # Join processes</span>
<span class="linenos">150</span>    <span class="c1"># process_post6.join()</span>
<span class="linenos">151</span>    <span class="c1"># process_post7.join()</span>
<span class="linenos">152</span>    <span class="c1"># process_post8.join()</span>
<span class="linenos">153</span>    <span class="c1"># process_post9.join()</span>
<span class="linenos">154</span>    <span class="c1"># process_post10.join()</span>
<span class="linenos">155</span>    <span class="c1"># process_post17.join()</span>
<span class="linenos">156</span>    <span class="c1"># process_post22.join()</span>
<span class="linenos">157</span>    <span class="n">process_post18</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="linenos">158</span>    <span class="c1"># process_post19.join()</span>
<span class="linenos">159</span>    <span class="c1"># process_post20.join()</span>
</pre></div>
</div>
</section>
<section id="parameters-to-change">
<h2>Parameters to change<a class="headerlink" href="#parameters-to-change" title="Permalink to this heading"></a></h2>
<section id="aruco-markers-parameters">
<h3>Aruco markers parameters<a class="headerlink" href="#aruco-markers-parameters" title="Permalink to this heading"></a></h3>
<p>Among the parameters that can be changed in the Car’s track test are the ones related to the <strong>Aruco markers</strong>. If the size or ID of the Aruco markers are changed, all the files must be updated with the new values. All the files have a first section in which the aruco markers parameters are defined. An example of this is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters of the Aruco markers located on the vehicle</span>
<span class="n">MARKER_SIZE</span> <span class="o">=</span> <span class="mf">0.20</span>
<span class="n">MARKER_ID_BACK</span>   <span class="o">=</span> <span class="mi">16</span>
<span class="n">MARKER_ID_MIDDLE</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">MARKER_ID_FRONT</span>  <span class="o">=</span> <span class="mi">14</span>
</pre></div>
</div>
</section>
<section id="parking-spots-or-line-stops-parameters">
<h3>Parking spots or line stops parameters<a class="headerlink" href="#parking-spots-or-line-stops-parameters" title="Permalink to this heading"></a></h3>
<p>The other relevant parameters to change are the ones related to the parking spots or line stops. The guide to change these parameters is located in ???? and <a class="reference internal" href="../../guide/update_line_stops.html"><span class="doc">Update lines for Line stop maneuvers</span></a> depending on the algorithm used. If the parking spots are change then it is necessary to update the files <strong>inline_parking_algorithms</strong> and <strong>reverse_parking_algorithms</strong>. If the line stops are changed then it is necessary to update the file <strong>stop_lines_algorithms</strong>.</p>
</section>
<section id="velocity-threshold">
<h3>Velocity threshold<a class="headerlink" href="#velocity-threshold" title="Permalink to this heading"></a></h3>
<p>The velocity threshold is the minimum velocity that the vehicle must have to be considered as moving. This value is used in various algorithms and can be changed in the file <strong>car_vision_algorithms.py</strong>. As of now the value is set to 0.05 m/s.</p>
</section>
</section>
<section id="algorithms-used">
<h2>Algorithms used<a class="headerlink" href="#algorithms-used" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="turn_algorithm.html">Turn Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="turn_algorithm.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="turn_algorithm.html#class-docs">Class docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="turn_algorithm.html#functions-docs">Functions docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inline_parking_algorithm.html">Inline parking Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inline_parking_algorithm.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="inline_parking_algorithm.html#class-docs">Class docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="inline_parking_algorithm.html#functions-docs">Functions docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ramp_algorithm.html">Ramp Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ramp_algorithm.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="ramp_algorithm.html#class-docs">Class docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="ramp_algorithm.html#functions-docs">Functions docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reverse_parking_algorithm.html">Reverse Parking Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reverse_parking_algorithm.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverse_parking_algorithm.html#class-docs">Class docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverse_parking_algorithm.html#functions-docs">Functions docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stop_lines_algorithm.html">Stop Lines Algorithm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stop_lines_algorithm.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="stop_lines_algorithm.html#class-docs">Class docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="stop_lines_algorithm.html#functions-docs">Functions docs</a></li>
</ul>
</li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../moto_circulacion/dashboard.html" class="btn btn-neutral float-left" title="Dashboard GUI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="turn_algorithm.html" class="btn btn-neutral float-right" title="Turn Algorithm" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, UNAL.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>